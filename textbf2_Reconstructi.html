<div><b>2. Reconstruction algorithm</b></div><div>The reconstruction algorithm consists of two major stages: 1)
calculation of observed orientation relationship and 2) clustering grain
by parental relationship. The first stage generates input information
for the second stage. The use of the first stage is optional, as one
could input a theoretical OR or OR measured/calculated from an external
source, but it’s highly recommended as the precise definition of the OR
has a direct impact on the final outcome of the reconstruction. The
proper value of OR highlights the gap between grain coming from distinct
parents and narrows the distance between related grains.</div><div>Both stages have a pre-processing step to identify some microstructure
features. The two main features that are relevant for the reconstruction
algorithm are: grain boundary surfaces and grain volumes. Those features
are identified, respectively, as a set of discrete voxel faces and
discrete voxel volumes derived from the orientation grid provided by the
input ANG file.</div><div>2.1 Pre-processing</div><div>Both OR calculation and phase reconstruction are based on the abstract
concept of grains and its grain boundaries, as well as the
crystallographic orientation associated to each entity. The trivial
method to obtain such kind of information is through EBSD scan maps. But
those are, regardless of the format ANG or CTF, a simple grid of
discrete orientation points and a pre-processing step to identify the
microstructure features is necessary.</div><div>The algorithm starts by parsing the ANG file and converting it to a
rectangular grid (if the input file is using the hexagonal grid), then
each measured point is converted into a voxel representation. A voxel is
a volume atomic unit in a three-dimensional regular grid, therefore it
has a regular position that can be indexed and well defined surface
boundaries [TODO: add picture describing it].</div><div>For every voxel, the misorientation between itself and its neighbors are
calculated at the voxel faces: -X, +X, -Y, +Y, -Z, +Z. This can be
modeled as a graph where voxels are nodes and voxel face form edges
between nodes. The edge weight is given by misorientation angle.</div><div>By pruning edges with higher values of misorientation values (by default
this value is set to 5°), the grains are simply defined as the set of
voxels forming each connected graph network. Each grain can now receive
a unique ID number (G<sub>id</sub>).</div><div>Grain boundaries are defined as the set voxel faces where
G<sup>A</sup><sub>id</sub></div><div>2.1 Orientation relationship calculation</div><div>One of the main characteristics of martensitic transformations is the
presence of a specific OR between parent and product phases. Although
there are some theoretical orientation relationships proposed such as
the Kurdjumov-Sachs (K-S) or Nishiyama-Wassermann (N-W) correspondences
for steels, a more accurate OR can only be derived from experimental
data. The available methods [22,23] for OR identification depend on
the manual selection of parent grains, which is time consuming and in
some cases, depending on the microstructure, impractical.</div><div>The method proposed here can derive the OR from an orientation scan in a
fully automated manner and it is based on the misorientation between
neighboring grains. There are two possible situations where the OR can
be observed. The first one is between a parent grain and its product
grain (when still a residual fraction of the parent phase is present in
the product microstructure), cf. (1). The second case is between product
grains sharing the same parent and involves a double OR transformation,
cf. (2). In the ideal conditions that the proposed OR is valid, the
angular deviation (OR) is equal to 0.</div><div>The algorithm finds the optimized OR transformation (T’⟷) that
minimizes the average angular deviation for all grain boundaries or for
a selected subset of them. The number of grain boundaries exhibiting
this OR should be vastly larger than the number of prior parent grain
boundaries. This is a reasonable assumption since the martensitic phase
transformation produces grain refinement and all the new grain
boundaries have misorientations that obey the OR transformation.</div><div>1 and 2</div><div>Two strategies were employed in order to calculate the grain boundary
misorientations. One is based on the average orientation of both
neighboring grains. The other one is based on the orientation in the
immediate vicinity of the grain boundary, where only the first layer of
orientations at each side of the grain boundary is selected. Slightly
different values of OR are obtained by the two strategies due to plastic
strain accommodation during phase transformation and associated
orientation gradients in bulk of the grains [22].</div><div>This new method was validated with a low Nb steel alloy with carbon
content around 0.05%. Figure 1 compares the distribution of angular
deviation using the theoretical KS OR and the optimized OR, it can be
noticed that the distribution shifts to the left, i.e. reducing the
overall error, when the optimized OR is used. Better results are
obtained when considering orientations in the immediate vicinity of the
grain boundary compared to considering grain averaged orientations.
Figure 2 compares the optimized OR for the low Nb sample with two
theoretical ORs and one reference value [22] that contains
comparable amount of carbon. The optimized OR is in good agreement with
the reference value.</div>