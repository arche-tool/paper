<div>For each voxel ,&nbsp;<span class="au-background-yellow" data-background="true" data-comment-id="181213"><span class="au-background-yellow" data-background="true" data-comment-id="181213">namely&nbsp;</span></span><span class="math ltx_Math v1">\(-X,+X,-Y,+Y,-Z,+Z\)</span>, the misorientation between the voxel and its neighbours are
calculated across the voxel faces. This can be
modelled as a graph where voxels are nodes and voxel face form edges
between the nodes. The edge weight is given by misorientation angle. Figure&nbsp;<span class="au-ref raw v1">\ref{334245}</span>-a shows a schematic representation for the <span class="au-background-yellow" data-background="true" data-comment-id="181214">two-dimensional case</span>.</div><div>By pruning edges with higher values of misorientation values (by default this value is set to 5Â°), the graph becomes disconnected, cf. Figure&nbsp;<span class="au-ref raw v1">\ref{334245}</span>-c. Now the grains are simply defined as the set of voxels forming each connected subgraph network. Each grain receives a unique ID number (<span class="math ltx_Math v1">\(g_{id}\)</span>) and every voxel is updated with this information, cf. Figure <span class="au-ref raw v1">\ref{334245}</span>-d.</div><div>Grain boundaries are defined as the set voxel faces  where&nbsp;<span class="math ltx_Math v1">\(g_{id}^A\ne g_{id}^B\)</span> for the any neighbouring voxel&nbsp;<span class="math ltx_Math v1">\(A\)</span>&nbsp; and&nbsp;<span class="math ltx_Math v1">\(B\)</span>. The grain boundaries can be easily find by filtering the pruned edges from the previous step (cf. Figure&nbsp;<span class="au-ref raw v1">\ref{334245}</span>-e) and grouping them by grain ID pairs, as described in the Equation&nbsp;<span class="au-ref raw v1">\ref{eq:gbdef}</span>.</div><div>The final&nbsp; microstructure graph in obtained combining the grains and grain boundaries, where grains are nodes and grain boundaries are edges, cf. Figure&nbsp;<span class="au-ref raw v1">\ref{334245}</span> and Equation&nbsp;<span class="au-ref raw v1">\ref{eq:micrograph}</span>. And both sets voxels and voxel faces becames properties of nodes and edges, respectively.</div>