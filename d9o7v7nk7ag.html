<div>At every  voxel face the misorientation between the voxel and its neighbours are
calculated. This can be
modelled as a graph where voxels are nodes and voxel face form edges
between the nodes. The edge weight is given by misorientation angle. Figure&nbsp;<span class="au-ref raw v1">\ref{334245}</span>a shows a schematic representation for the&nbsp;<span class="au-background-yellow" data-background="true" data-comment-id="181214">two-dimensional case</span>.</div><div>By pruning edges with misorientation angles higher than a threshold (by default this threshold value is set to 5Â°), the graph becomes disconnected, cf. Figure&nbsp;<span class="au-ref raw v1">\ref{334245}</span>c. At this stage, the grains are simply defined as the set of voxels forming each connected subgraph network. Each grain receives a unique ID number (<span class="math ltx_Math v1">\(g_{id}\)</span>) and every voxel is updated with this information, cf. Figure&nbsp;<span class="au-ref raw v1">\ref{334245}</span>d.</div><div>For  any neighbouring voxels&nbsp;<span class="math ltx_Math v1">\(A\)</span>&nbsp; and&nbsp;<span class="math ltx_Math v1">\(B\)</span>, grain boundaries are defined as the set of voxel faces  where&nbsp;<span class="math ltx_Math v1">\(g_{id}^A\ne g_{id}^B\)</span>&nbsp;<span class="math ltx_Math v1">\(B\)</span>. The grain boundaries can be easily detected by filtering the pruned edges from the previous step (cf. Figure&nbsp;<span class="au-ref raw v1">\ref{334245}</span>e) and grouping them by grain ID pairs, as described in  Equation&nbsp;<span class="au-ref raw v1">\ref{eq:gbdef}</span>.</div><div>The final microstructure graph is obtained by combining the grains and grain boundaries, where grains are nodes and grain boundaries are edges, cf. Figure&nbsp;<span class="au-ref raw v1">\ref{334245}</span> and Equation&nbsp;<span class="au-ref raw v1">\ref{eq:micrograph}</span>. Both sets of voxels and voxel faces become properties of nodes and edges, respectively.</div>